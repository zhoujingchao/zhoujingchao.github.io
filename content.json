[{"title":"移动端webApp踩坑之记","date":"2017-07-06T15:32:02.000Z","path":"2017/07/06/移动端webApp踩坑之记/","text":"记录一下最近移动端webApp项目开发中，遇到的一些坑。 一、WebView 性能优化1. WebView的启动到js解析，编译，执行，消耗的时间比较久，然后呈现在眼前就是这么几个状态： 交互无反馈 到达新的页面，页面白屏 页面基本框架出现，但是没有数据；页面处于loading状态 最后出现所需的数据 解决思路： h5做的是单页面，所以h5首先做了按需加载，接着WebView也做了按需加载，这样就快很多了，时间大概在1-2s， 刚启动的时候就补了个动画页弥补这1-2s的加载 原生和h5都需要做本地缓存使页面和图片呈现的更快，再做数据请求更新 2. 点击延迟在WebView中，click通常会有大约300ms的延迟（包括链接的点击，表单的提交，控件的交互等任何用户点击行为）。 解决思路参考链接: fastclick 二、在ios中，输入状态时，h5定位属性fixed失效```12345678910111213141516171819&lt;div&gt; &lt;!-- fixed定位的头部 --&gt; &lt;header class=\"header\"&gt; 我是头部 &lt;/header&gt; &lt;!-- 可以滚动的区域 --&gt; &lt;main class=\"main\"&gt; &lt;!-- 内容在这里... --&gt; &lt;/main&gt; &lt;!-- fixed定位的底部 --&gt; &lt;footer class=\"footer\"&gt; &lt;div class=\"textarea needsclick\" contentEditable=\"true\" suppressContentEditableWarning&gt;&lt;/div&gt; &lt;button onclick=\"handleClick()\"&gt;发送&lt;/button&gt; &lt;/footer&gt;&lt;/div&gt; 网上也查得到相关解决方案比如：http://efe.baidu.com/blog/mobile-fixed-layout/但是我也不知道为什么我按这个思路来，还是解决不了这个问题，有些人说可以解决，有些人说解决不了，就是这么的奇葩，或许是我姿势不对吧。=_=!! so，还是自己尝试摸索解决，我的布局header和footer是fixed，中间可滚动的区域是relative，算了不说了，直接上代码吧。```12345678910111213141516171819202122232425262728// listenFocus和listenBlur是给可编辑div添加的聚焦和失焦的事件监听listenFocus = () =&gt; &#123; if (isiOS) &#123; let clientHeight = document.querySelector('.main').clientHeight // 高保真给的是2x的图，头部和底部的高度都是100px，所以中间的可视高度如下 let availHeight = (clientHeight - 200) / 2 // 此定位解决方案，当内容达不到滚动时，输入框就会移动，所以判断下内容高度是否达到滚动条件 if (availHeight &gt; window.screen.availHeight) &#123; // 巨坑啊！fuck this！fixed属性失效，千辛万苦摸索定位解决 document.querySelector('.footer').style.position = 'relative' document.querySelector('.main').style.paddingBottom = '0' &#125; // 原生键盘弹起后, 操作时高度会不一样，使输入框始终不会被键盘遮挡 timerId = setInterval(function() &#123; document.body.scrollTop = document.body.scrollHeight &#125;, 100) &#125;&#125; listenBlur = () =&gt; &#123; if (isiOS) &#123; let clientHeight = document.querySelector('.main').clientHeight let availHeight = (clientHeight - 200) / 2 if (availHeight &gt; window.screen.availHeight) &#123; document.querySelector('.footer').style.position = 'fixed' document.querySelector('.main').style.paddingBottom = '1rem' &#125; clearInterval(timerId) &#125;","tags":[]},{"title":"Hello World","date":"2017-01-05T14:59:57.000Z","path":"2017/01/05/hello-world/","text":"在朋友的介绍下，这个博客很快就搭建起来了。 当看见它加载下来的时候，内心还是很喜悦的，有了自己的一小块领地，这种感觉很奇妙，现在想想都还有点小刺激呢。对我这种语文是体育老师教的宝宝，想想要写作，我就不自觉的在偷笑，啊哈哈 =_=好记性不如烂笔头，请打开学习旅程吧！ 当然这个色调和主题甚是喜欢啊，感谢litten大虾的神作。","tags":[]}]